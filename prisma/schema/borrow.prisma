enum BorrowStatus {
    posted
    waiting_for_request
    waiting_for_confirmation
    confirmed
    lent
    returned
    overdue
    completed
    failed
}

// BORROW
model Borrow {
    id            String       @id @default(uuid()) @db.VarChar(255)
    user          User         @relation(fields: [user_id], references: [id])
    user_id       String       @db.VarChar(255)
    name          String       @db.VarChar(255)
    description   String       @db.VarChar(255)
    address       Address      @relation(fields: [address_id], references: [id])
    address_id    String       @db.VarChar(255)
    category      Category     @relation(fields: [category_id], references: [id])
    category_id   String       @db.VarChar(255)
    phone         Phone        @relation(fields: [phone_id], references: [id])
    phone_id      String       @db.VarChar(255)
    duration_from DateTime
    duration_to   DateTime
    status        BorrowStatus @default(posted)
    status_detail String       @db.VarChar(255)
    created_at    DateTime     @default(now())
    updated_at    DateTime     @updatedAt

    images       BorrowImage[]
    applications BorrowApplication[]
}

// BORROW_IMAGES
model BorrowImage {
    id         String   @id @default(uuid()) @db.VarChar(255)
    borrow     Borrow   @relation(fields: [borrow_id], references: [id])
    borrow_id  String   @db.VarChar(255)
    image_path String   @db.VarChar(255)
    image_name String   @db.VarChar(255)
    image_size Int
    created_at DateTime @default(now())
}

enum BorrowApplicationStatus {
    request_submitted
    confirmed
    borrowed
    returned
    overdue
    completed
    failed
}

// BORROW_APPLICATIONS
model BorrowApplication {
    id            String                  @id @default(uuid()) @db.VarChar(255)
    borrow        Borrow                  @relation(fields: [borrow_id], references: [id])
    borrow_id     String                  @db.VarChar(255)
    user          User                    @relation(fields: [user_id], references: [id])
    user_id       String                  @db.VarChar(255)
    reason        String                  @db.VarChar(255)
    address       Address                 @relation(fields: [address_id], references: [id])
    address_id    String                  @db.VarChar(255)
    phone         Phone                   @relation(fields: [phone_id], references: [id])
    phone_id      String                  @db.VarChar(255)
    duration_from DateTime
    duration_to   DateTime
    status        BorrowApplicationStatus @default(request_submitted)
    status_detail String                  @db.VarChar(255)
    created_at    DateTime                @default(now())
    updated_at    DateTime                @updatedAt
}
