enum DonationStatus {
    submitted
    confirmed
    completed
    failed
}

// DONATIONS
model Donation {
    id          Int      @id @default(autoincrement())
    user        User     @relation(fields: [user_id], references: [id])
    user_id     Int
    item_name   String   @db.VarChar(255)
    description String   @db.Text
    address     Address  @relation(fields: [address_id], references: [id])
    address_id  Int
    category    Category @relation(fields: [category_id], references: [id])
    category_id Int
    phone       Phone    @relation(fields: [phone_id], references: [id])
    phone_id    Int
    // status        DonationStatus @default(submitted)
    // status_detail String         @db.VarChar(255)
    created_at  DateTime @default(now())
    updated_at  DateTime @updatedAt

    images                  DonationImage[]
    donationStatusHistories DonationStatusHistory[]

    @@map("donations")
}

model DonationStatusHistory {
    id            Int            @id @default(autoincrement())
    donation      Donation       @relation(fields: [donation_id], references: [id])
    donation_id   Int
    status        DonationStatus @default(submitted)
    status_detail String         @db.VarChar(255)
    created_at    DateTime       @default(now())
    updated_at    DateTime       @updatedAt
    updated       User?          @relation(fields: [updated_by], references: [id])
    updated_by    Int?

    @@map("donation_status_histories")
}

model DonationImage {
    id          Int      @id @default(autoincrement())
    donation    Donation @relation(fields: [donation_id], references: [id])
    donation_id Int
    image_path  String   @db.VarChar(255)
    image_name  String   @db.VarChar(255)
    image_size  Int
    created_at  DateTime @default(now())

    @@map("donation_images")
}
